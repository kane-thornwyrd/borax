!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("immutable")):"function"==typeof define&&define.amd?define(["immutable"],e):"object"==typeof exports?exports.Borax=e(require("immutable")):t.Borax=e(t.Immutable)}(this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){(function(e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var o=r(1),i=n(o);e.Borax=t.exports={Datastore:i.default}}).call(e,function(){return this}()||Function("return this")())},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=r(2),u=n(s),c=100,a=void 0,f=function(){function t(){o(this,t),this.history=[u.default.Map()],this.reducers={},this.cbs=[]}return t.prototype.registerReducer=function(t,e){return this.reducers[t]=e,this},t.prototype.getState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.history[this.history.length-1-t]},t.prototype.dispatch=function(t){var e=this,r=this.getState();return this.history.push(r.withMutations(function(n){for(var o in e.reducers){var s=r.get(o)?r.get(o).toJS():{};n.set(o,u.default.Map(i(s,e.reducers[o](r.get(o),t))))}})),this.history.length>c&&this.history.shift(),this.trigger()},t.prototype.onNewstate=function(t){var e=this.cbs.length;return this.cbs.push(t),e},t.prototype.offNewState=function(t){return t>this.cbs.length-1&&this.cbs.splice(t,1),this.cbs.length},t.prototype.trigger=function(){var t=this.getState(),e=function(e){return e(t)};return this.cbs.every(e),this},t}();t.exports=a=a?a:new f},function(e,r){e.exports=t}])});